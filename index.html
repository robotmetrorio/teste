<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>RôBot - Atendimento Digital</title>

  <!-- Evitar cache -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      font-family: Arial, sans-serif;
      background-image: url('imagens/fundo.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }

    #primeiraTela {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: flex-start;
      padding-left: 200px;
      padding-top: 90px;
      height: 100vh;
      position: relative;
      color: white;
    }

    #video1, #video2 {
      position: absolute;
      top: 43%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100vw;
      height: 102vh;
      object-fit: contain;
      z-index: 0;
      pointer-events: none;
    }

    #video2 {
      display: none;
    }

    #inputArea {
      margin-left: 100px;
      margin-top: -60px;
      z-index: 1;
    }

    h2 {
      color: white;
      margin-bottom: 5px;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
      padding-left: 23px;
    }

    #inputBox {
      width: 264px;
      height: 50px;
      font-size: 28px;
      margin-bottom: 15px;
      border: 2px solid #00BFFF;
      border-radius: 10px;
      text-align: center;
      background: rgba(0,0,0,0.4);
      color: white;
      outline: none;
    }

    #inputBox::placeholder {
      color: white;
      opacity: 1;
    }

    #submitBtn {
      background: #00BFFF;
      border: none;
      color: white;
      cursor: pointer;
      border-radius: 10px;
      box-shadow: 0 0 15px #00BFFF;
      font-size: 20px;
      margin-top: 15px;
      padding: 14px 28px;
    }

    #keyboardContainer {
      margin-top: 10px;
      margin-bottom: 20px;
    }

    .keyboard {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      gap: 15px;
      justify-content: flex-start;
    }

    .key {
      padding: 20px;
      font-size: 24px;
      border-radius: 10px;
      background: #00BFFF;
      color: white;
      border: none;
      cursor: pointer;
      box-shadow: 0 0 6px #00BFFF;
      transition: transform 0.1s ease;
    }

    .key:active {
      transform: scale(0.95);
    }

    #clear {
      font-size: 16px;
      padding: 12px;
    }

    #message {
      margin-top: -8px;
      font-size: 14px;
      font-weight: bold;
      text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
    }

    #segundaTela {
      display: none;
      position: relative;
      width: 100vw;
      height: 100vh;
      color: white;
    }

    .video-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 0;
      pointer-events: none;
    }

    .video-overlay video {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }

    .container {
      position: absolute;
      top: 10%;
      margin-left: 358px;
      width: 980px;
      height: 86%;
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 1;
    }

    .content-frame {
      width: 77%;
      height: 100%;
      border: 3px solid cyan;
      border-radius: 15px;
    }

    #usuario {
      position: absolute;
      top: 43px;
      left: 485px;
      z-index: 2;
      font-size: 15px;
      font-weight: bold;
      text-shadow: 1px 1px 4px black;
    }

    #botao-sair {
      position: absolute;
      top: 42px;
      right: 50px;
      text-align: center;
      cursor: pointer;
      z-index: 5;
    }

    #linkR {
      position: fixed;
      top: 8%;
      left: 87%;
      width: 30px;
      height: 30px;
      background-color: transparent;
      border: none;
      z-index: 9999;
      cursor: pointer;
      text-indent: -9999px;
    }

/* Responsividade para tablets e telas menores (teclado, input e iframe) */
@media (max-width: 1024px) {
  .keyboard {
    grid-template-columns: repeat(3, 100px); /* teclas mais largas */
    gap: 20px; /* mais espaço */
  }

  .key {
    padding: 25px;       /* maior área de clique */
    font-size: 28px;     /* fonte maior */
  }

  #inputArea {
    margin-left: 10px;
    margin-top: 20px;
  }

  .container {
    top: 120px;
    left: 50%;
    transform: translateX(-49%);
    width: 95vw;
    height: 55vh;
    margin-left: 0;
  }

  .content-frame {
    width: 100%;
    height: 100%;
  }
}

/* Mobile: vídeos somem e imagens aparecem */
@media (max-width: 768px) {
  /* Esconde TODOS os vídeos e o fundo padrão no mobile */
  #video1, #video2, #video3 {
    display: none !important;
  }
  html, body {
    background-image: none !important;
    background: none !important;
  }

  /* Mostra SOMENTE as imagens mobile */
  #imgMobile1, #imgMobile2 {
    display: block !important;
  }

  /* Centraliza teclado no mobile */
  #inputArea {
    margin-left: 20px !important;
    margin-top: 120px !important;
    text-align: center !important;
  }
  .keyboard {
    justify-content: center !important;
  }
}
  #imgMobile1 {
    display: block;
  }
    
  #imgMobile2 {
    display: block;
  }
}

/* Imagens de fundo para mobile (inicialmente escondidas) */
#imgMobile1, #imgMobile2 {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  z-index: 0;
}
  
#imgMobile1, #imgMobile2 {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  z-index: 0;
}

#inputArea {
  position: relative;
  z-index: 10;
}

  
/* Fallback para dispositivos touch (garantir mobile) */
@media (hover: none) and (pointer: coarse) {
  #video1, #video2, #video3 {
    display: none !important;
  }
  html, body {
    background-image: none !important;
    background: none !important;
  }
  #imgMobile1, #imgMobile2 {
    display: block !important;
  }
  #inputArea {
    margin: 0 auto !important;
    margin-top: 100px !important;
    text-align: center !important;
  }
  .keyboard {
    justify-content: center !important;
  }
}

  </style>
</head>
<body>

<!-- ======== Primeira Tela ======== -->
<div id="primeiraTela">
  <video id="video1" autoplay muted playsinline>
    <source src="midias/primeirovideo.mp4" type="video/mp4">
  </video>
  <video id="video2" autoplay muted loop playsinline>
    <source src="midias/segundovideo.mp4" type="video/mp4">
  </video>
  <!-- Imagem substituta para mobile -->
  <img id="imgMobile1" src="imagens/fundo-mobile.jpg" alt="Fundo Mobile">

  <div id="inputArea">
    <h2>Digite sua Matrícula</h2>
    <input id="inputBox" type="text" placeholder="Matrícula" readonly />
    <div id="keyboardContainer">
      <div class="keyboard">
        <button class="key">1</button>
        <button class="key">2</button>
        <button class="key">3</button>
        <button class="key">4</button>
        <button class="key">5</button>
        <button class="key">6</button>
        <button class="key">7</button>
        <button class="key">8</button>
        <button class="key">9</button>
        <button class="key">0</button>
        <button class="key" id="clear">Limpar</button>
        <button class="key" id="backspace">←</button>
      </div>
      <button id="submitBtn">Confirmar</button>
    </div>
    <div id="message"></div>
  </div>
</div>

<!-- ======== Segunda Tela ======== -->
<div id="segundaTela">
  <div class="video-overlay">
    <video id="video3" autoplay muted loop playsinline style="position:relative; z-index:2;">
     <source src="midias/terceirovideo.mp4" type="video/mp4">
    </video>
    <!-- Imagem substituta para mobile -->
    <img id="imgMobile2" src="imagens/fundo-mobile.jpg" alt="Fundo Mobile" style="z-index:0;">
  </div>

  <div class="container">
    <iframe id="content-frame" name="content" class="content-frame" src="menu.principal.html"></iframe>
  </div>

  <div id="usuario">Colaborador(a): <span id="nomeUsuario">...</span></div>

  <div id="botao-sair">
    <div style="font-size:14px; font-weight:bold; color:white; line-height:1.2;">
      <span style="display:block; margin-bottom:-15px;">SAIR</span>
    </div>
    <div style="cursor:pointer" onclick="recarregar()">
      <img src="icones/sair2.png" alt="Sair" style="width:68px; height:68px; margin-top:4px;">
    </div>
  </div>
</div>

<a href="relatorio-avaliacoes.html" id="linkR" title="Relatório">R</a>

<script src="database.js"></script>
<script>
  const inputBox = document.getElementById('inputBox');
  const keys = document.querySelectorAll('.key');
  const messageDiv = document.getElementById('message');
  const video1 = document.getElementById('video1');
  const video2 = document.getElementById('video2');

  keys.forEach(key => {
    key.addEventListener('click', () => {
      if (key.id === 'clear') inputBox.value = '';
      else if (key.id === 'backspace') inputBox.value = inputBox.value.slice(0, -1);
      else inputBox.value += key.textContent;
    });
  });

  document.getElementById('submitBtn').onclick = function () {
    const matricula = inputBox.value.trim();
    if (matricula && database[matricula]) {
      localStorage.setItem("nome", database[matricula].nome);
      localStorage.setItem("matricula", matricula);
      localStorage.setItem("cargo", database[matricula].cargo || "");
      localStorage.setItem("coordenacao", database[matricula].coordenacao || "");
      localStorage.setItem("gerencia", database[matricula].gerencia || "");
      document.getElementById('nomeUsuario').textContent = database[matricula].nome;
      messageDiv.innerHTML = `OLÁ, ${database[matricula].nome},<br>você será direcionado para a próxima página em 2 segundos.`;
      messageDiv.style.color = 'white';
      setTimeout(() => {
        document.getElementById('primeiraTela').style.display = 'none';
        document.getElementById('segundaTela').style.display = 'block';
        document.getElementById('content-frame').src = "menu.principal.html";
        iniciarContagem();
      }, 2000);
    } else {
      messageDiv.textContent = 'Matrícula não encontrada - Tente novamente';
      messageDiv.style.color = '#FF0000';
    }
  };

  function resetVideos() {
    video1.currentTime = 0;
    video2.currentTime = 0;
    video2.pause();
    video1.style.display = 'block';
    video2.style.display = 'none';
    video1.play();

    setTimeout(() => {
      video1.style.display = 'none';
      video2.style.display = 'block';
      video2.play();
    }, 24000);
  }

  resetVideos();

  let intervalo;
  let tempoRestante;
  const TEMPO_INATIVIDADE = 60 * 1000;

  function iniciarContagem() {
    clearInterval(intervalo);
    tempoRestante = TEMPO_INATIVIDADE;
    intervalo = setInterval(() => {
      tempoRestante -= 1000;
      if (tempoRestante <= 0) recarregar();
    }, 1000);
  }

  function recarregar() {
    clearInterval(intervalo);
    document.getElementById('segundaTela').style.display = 'none';
    document.getElementById('primeiraTela').style.display = 'flex';
    inputBox.value = '';
    inputBox.placeholder = 'Matrícula';
    document.getElementById('content-frame').src = "menu.principal.html";
    messageDiv.textContent = '';
    resetVideos();
  }

  ['mousemove','mousedown','keydown','scroll','touchstart'].forEach(evt => {
    document.addEventListener(evt, () => tempoRestante = TEMPO_INATIVIDADE);
  });


  // Recarregar automaticamente a cada 30 minutos, mas só se estiver na primeira tela
  setTimeout(() => {
    const primeiraTelaVisivel = document.getElementById('primeiraTela').style.display !== 'none';
    if (primeiraTelaVisivel) {
      location.reload(true);
    }
  }, 900000); // 15 minutos

</script>
</body>
</html>











